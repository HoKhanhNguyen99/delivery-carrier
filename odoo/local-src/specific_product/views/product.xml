<odoo>
  <record id="product_template_only_form_view" model="ir.ui.view">
    <field name="name">product.template.common.form</field>
    <field name="model">product.template</field>
    <field name="inherit_id" ref="product.product_template_only_form_view"/>
    <field name="arch" type="xml">
      <field name="default_code" position="attributes">
        <attribute name="attrs">{'invisible':[('default_code', '=', False)]}</attribute>
      </field>
      <field name="default_code" position="after">
        <field name="e_nr"/>
      </field>

      <!-- Add product state, class and harmsys code fields-->
      <field name="categ_id" position="after">
        <field name="state"/>
        <field name="product_class"/>
        <field name="harmsys_code"/>
      </field>
      <!-- Add color code and manual code fields -->
      <xpath expr="//group[@name='group_lots_and_weight']/div[last()]" position="after">
        <field name="color_code"/>
        <field name="manual_code"/>
      </xpath>
      <!-- Add pim field -->
      <xpath expr="//field[@name='purchase_ok']/.." position="after">
        <div>
          <field name="export_to_pim" />
          <label for="export_to_pim"/>
        </div>
      </xpath>
    </field>
  </record>

  <!-- Add the transit quantity in the product.template form -->
  <record id="product_template_form_view_transit" model="ir.ui.view">
    <field name="name">Transit quantity on product template form</field>
    <field name="model">product.template</field>
    <field name="inherit_id" ref="stock.product_template_form_view_procurement_button"/>
    <field name="arch" type="xml">
      <data>
        <xpath expr="//field[@name='qty_available']/ancestor::button" position="after">
          <button type="object" name="action_transit_move"
                  attrs="{'invisible':[('type', '!=', 'product')]}"
                  class="oe_stat_button" icon="fa-building-o">
            <div class="o_form_field o_stat_info">
              <field name="transit_qty"
                     widget="statinfo" nolabel="1"/>
              <span class="o_stat_text">Transit</span>
            </div>
          </button>
        </xpath>
      </data>
    </field>
  </record>

  <!-- Add the transit quantity in the product.product form -->
  <record id="product_product_form_view_transit" model="ir.ui.view">
    <field name="name">Transit quantity on product form</field>
    <field name="model">product.product</field>
    <field name="inherit_id" ref="stock.product_form_view_procurement_button"/>
    <field name="arch" type="xml">
      <data>
        <xpath expr="//field[@name='qty_available']/ancestor::button" position="after">
          <button type="object" name="action_transit_move"
                  attrs="{'invisible':[('type', '!=', 'product')]}"
                  class="oe_stat_button" icon="fa-building-o">
            <div class="o_form_field o_stat_info">
              <field name="transit_qty"
                     widget="statinfo" nolabel="1"/>
              <span class="o_stat_text">Transit</span>
            </div>
          </button>
        </xpath>
      </data>
    </field>
  </record>

  <!-- Add E-nr in search view -->
  <record id="product_template_search_view" model="ir.ui.view">
    <field name="name">product.template.search</field>
    <field name="model">product.template</field>
    <field name="inherit_id" ref="product.product_template_search_view"/>
    <field name="arch" type="xml">
      <field name="name" position="attributes">
        <attribute name="filter_domain">
          ['|', '|',('default_code','ilike',self),('name','ilike',self), ('e_nr','ilike',self)]
        </attribute>
      </field>
    </field>
  </record>

  <record id="product_normal_form_view" model="ir.ui.view">
        <field name="name">product_normal_form_view</field>
        <field name="model">product.product</field>
        <field name="inherit_id" ref="product.product_normal_form_view" />
        <field name="type">form</field>
        <field eval="15" name="priority"/>
        <field name="arch" type="xml">
          <!-- Add pim field -->
          <xpath expr="//field[@name='purchase_ok']/.." position="after">
            <div>
              <field name="export_to_pim" />
              <label for="export_to_pim"/>
            </div>
          </xpath>

          <!-- Add product state, class and harmsys code fields-->
          <field name="categ_id" position="after">
            <field name="state"/>
            <field name="product_class"/>
            <field name="harmsys_code"/>
          </field>

          <!-- Add color code and manual code fields -->
          <xpath expr="//group[@name='group_lots_and_weight']/div[last()]" position="after">
            <field name="color_code"/>
            <field name="manual_code"/>
          </xpath>
        </field>
  </record>


</odoo>
