migration:
  options:
    install_args: --load=web,web_kanban,session_redis,attachment_s3,logging_json
  versions:
    - version: 9.3.3
      operations:
        post:
          - anthem openerp.addons.cloud_platform.songs::install_exoscale
          - oerpscenario -t setup -t ~slow

      addons:
        upgrade:
          # Odoo
          - account
          - account_cancel
          - account_budget
          - account_extra_reports
          - hr
          - hr_contract
          - hr_expense
          - hr_holidays
          - hr_recruitment
          - hr_timesheet
          - hr_timesheet_sheet
          - l10n_ch
          - mrp
          - mrp_byproduct
          - purchase
          - product_visible_discount
          - project
          - project_issue
          - report_intrastat
          - sale
          - stock
          - warning
          - account_reports_followup
          - hr_appraisal
          #OCA
          #oca/bank-statement-reconcile
          - account_operation_rule_early_payment_discount
          #oca/carrier-delivery
          - delivery_carrier_label_postlogistics
          #oca/department
          - analytic_base_department
          - analytic_department
          - project_department
          - project_task_department
          #oca/l10n-switzerland
          - l10n_ch_bank
          - l10n_ch_payment_slip
          - l10n_ch_pain_credit_transfer
          - l10n_ch_states
          - l10n_ch_zip
          #oca/partner-contact
          - partner_firstname
          #oca/product-attribute
          - product_dimension
          #oca/project
          - project_task_default_stage
          #oca/stock-logistics-warehouse
          - stock_available_mrp
          #oca/stock-logistics-workflow
          - stock_split_picking
          #oca/manufacture
          - mrp_bom_dismantling
          #oca/server-tools
          - base_technical_features
          #camptocamp/cloud-platform
          - cloud_platform
          #Specific
          - specific_account
          - specific_building_project
          - specific_hr
          - specific_invoice
          - specific_pad
          - specific_partner
          - specific_product
          - specific_reports
          - specific_stock
          - specific_timesheet
          - specific_timesheet_activities
          - specific_translations
    - version: 9.3.4
      modes:
        full:
          operations:
            post:
              - oerpscenario -t setup -t slow
    - version: 9.3.5
      operations:
        pre:
          - "sh -c 'PGPASSWORD=$DB_PASSWORD psql -h db -U $DB_USER -f songs/updates/update_9_3_5/update.sql $DB_NAME'"
      addons:
        upgrade:
          - attachment_s3
    - version: 9.3.6
      operations:
        pre:
          - "sh -c 'PGPASSWORD=$DB_PASSWORD psql -h db -U $DB_USER -f songs/updates/update_9_3_6/update.sql $DB_NAME'"
      addons:
        upgrade:
          - specific_invoice
    - version: 9.3.7
      addons:
        upgrade:
          - specific_reports
    - version: 9.4.0
      addons:
        upgrade:
          - logging_json
          - monitoring_statsd
          - cloud_platform
    - version: 9.4.1
    - version: 9.4.2
    - version: 9.4.3
      modes:
        full:
          operations:
            post:
              - anthem songs.updates.update_9_4_3.data::main
      addons:
        upgrade:
          - specific_reports
          - specific_product
    - version: 9.4.4
    - version: 9.4.5
      addons:
        upgrade:
          - specific_reports
    - version: 9.4.6
      operations:
        post:
          - anthem songs.updates.update_9_4_6.update::main
      addons:
        upgrade:
          - specific_reports
    - version: 9.4.7
      modes:
        full:
          operations:
            pre:
              - "sh -c 'PGPASSWORD=$DB_PASSWORD psql -h db -U $DB_USER -f songs/updates/update_9_4_7/update.sql $DB_NAME'"
              - anthem songs.updates.update_9_4_7.update::main
      addons:
        upgrade:
          - board 
    - version: 9.4.8
      operations:
        post:
          - anthem songs.updates.update_9_4_8.update::main
      addons:
        upgrade:
          - specific_partner
          - specific_reports
    - version: 9.4.9
      operations:
        pre:
          - "sh -c 'PGPASSWORD=$DB_PASSWORD psql -h db -U $DB_USER -f songs/updates/update_9_4_9/update.sql $DB_NAME'"
        post:
          - anthem songs.updates.update_9_4_9.update::main
      addons:
        upgrade:
          - specific_reports
          - specific_product
          - specific_account
          - mail_environment
